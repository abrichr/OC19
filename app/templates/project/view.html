{% extends "layout.html" %}


{% block head %}

{{ super() }}

<style>

textarea {
  height: 6em !important;
}

#project-actions form {
  display: inline-block;
}



</style>

{% endblock %}


{% block content %}

<div class="ui container segment">
  <h2>{{ project.title }}</h2>
  <div class="ui card fluid">
    <div class="content">
      <div class="num-users">
        <p>
          {{ project.users_joined|length }} user(s):
          {% for user in project.users_joined %}
            <a
              href="{{
                url_for('userbp.view', user_id=user.id )
              }}"
              class="ui label"
            >
              {{ user.full_name }}
            </a>
          {% endfor %}
        </p>
      </div>
      <div class="ui divider"></div>
      {% for key, field in field_by_key.items() %}
        <div class="field">
          <div class="ui aligned three column grid">
            <div class="ui four wide column right">
              <div class="ui basic label large right floated">
                {{ field['label'] }}
              </div>
            </div>
            <div class="eight wide column">
              {{ field['data'] or '-' }}
            </div>
          </div>
        </div>
      {% endfor %}
      <div class="ui divider"></div>
      <div id="project-actions">
        <form
          method="post"
          action="{{ url_for('projectbp.join', project_id=project.id) }}"
        >
          <button class="ui primary button" type="submit">
            {% if current_user in project.users_joined %}
              Leave
            {% else %}
              Join
            {% endif %}
            <i class="right arrow icon"></i>
          </button>
        </form>
        {%
          if current_user.is_superadmin or
          project.created_by_user_id == current_user.id
        %}
          <form
            method="get"
            action="{{ url_for('projectbp.edit', project_id=project.id) }}"
          >
            <button class="ui primary button" type="submit">
              Edit
            </button>
          </form>
          <form
            method="post"
            action="{{
              url_for('projectbp.delete', project_id=project.id)
            }}"
          >
            <button class="ui primary button" type="submit">
              Delete
            </button>
          </form>
        {% endif %}
      </div>
    </div>
  </div>
</div>

{% endblock %}
