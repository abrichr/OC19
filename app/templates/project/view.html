{% extends 'layout.html' %}


{% block title %}

- {{ project.name }}

{% endblock %}


{% block css %}

<link
  rel="stylesheet"
  type="text/css"
  href="{{ url_for('static', filename='css/projects.css') }}"
/>

{% endblock %}


{% block styles %}

<style>

form {
  margin-top: 10px;
}

</style>

{% endblock %}


{% from "helpers/_formhelpers.html" import render_field %}


{% block content %}

<div class="container">
  <h2>{{ project.title }}</h2>
  <div class="card">
    <div class="card-body">
      <div class="num-users">
        <span class="badge badge-dark">
          {{ project.users|length }} user(s)
        </span>
      </div>
      <dt>Description</dt>
      <dd>{{ project.description }}</dd>
      <dt>Needed</dt>
      <dd>{{ project.needed }}</dd>
      <dt>Provided</dt>
      <dd>{{ project.provided }}</dd>
      <form
        method="post"
        action="{{ url_for('project.join', project_id=project._id) }}"
      >
        <button class="btn btn-primary btn-block" type="submit">
          {% if current_user.id in project.users %}
            Leave
          {% else %}
            Join
          {% endif %}
        </button>
      </form>
      {% if current_user.is_superadmin or project._id in current_user.project_ids %}
        <form
          method="post"
          action="{{ url_for('project.delete', project_id=project._id) }}"
        >
          <button class="btn btn-danger btn-block" type="submit">
            Delete
          </button>
        </form>
      {% endif %}
    </div>
  </div>
</div>

{% endblock %}
