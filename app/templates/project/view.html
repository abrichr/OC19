{% extends "layout.html" %}


{% block head %}

{{ super() }}

<style>

textarea {
  height: 6em !important;
}

#project-actions form {
  display: inline-block;
}

.num-users .label {
  margin-bottom: 5px;
}
.num-users span.ui.meta {
  margin-right: 5px;
}



</style>

{% endblock %}


{% block content %}

<div class="ui container segment">
  <h2>{{ project.title }}</h2>
    <div class="content">
      <div class="num-users">
        <p class="ui text meta">
          {{ project.users_joined|length }}
          {{ 'members' if project.users_joined|length != 1 else 'member' }}
          {{ ':' if project.users_joined|length > 0  else '' }}
        </p>
        <p>
          {% for user in project.users_joined %}
            <a
              href="{{
                url_for('userbp.view', user_id=user.id )
              }}"
              class="ui label"
            >
              {{ user.full_name }}
            </a>
          {% endfor %}
        </p>
      </div>
      <div class="ui divider"></div>
      {% for key, field in field_by_key.items() %}
        <div class="ui aligned four wide stackable grid">
          <div class="ui four wide column">
            <strong>
              {{ field['label'] }}
            </strong>
          </div>
          <div class="eight wide column">
            {{ field['data'] or '-' }}
          </div>
        </div>
        <div class="ui divider"></div>
      {% endfor %}
      <div id="project-actions">
        <form
          method="post"
          action="{{ url_for('projectbp.join', project_id=project.id) }}"
        >
          <button class="ui primary button" type="submit">
            {% if current_user in project.users_joined %}
              Leave
            {% else %}
              Join
            {% endif %}
            <i class="right arrow icon"></i>
          </button>
        </form>
        {%
          if current_user.is_superadmin or
          project.created_by_user_id == current_user.id
        %}
          <form
            method="get"
            action="{{ url_for('projectbp.edit', project_id=project.id) }}"
          >
            <button class="ui primary button" type="submit">
              Edit
            </button>
          </form>
          <form
            method="post"
            action="{{
              url_for('projectbp.delete', project_id=project.id)
            }}"
          >
            <button class="ui primary button" type="submit">
              Delete
            </button>
          </form>
        {% endif %}
      </div>
    </div>
</div>

{% endblock %}
