<!DOCTYPE html> {% import "macros.html" as m %}
<html lang="en">


<style>

/* Layout */

#container {
  display: flex;
  min-height: 100vh;
  flex-direction: column;
}

#header-and-body {
  flex: 1;
  flex-direction: column;
  display: flex;
}

#navbar > a {
  border-radius: 0;
}

#body {
  display: flex;
  flex-direction: column;
  flex: 1;
  padding: 20px 0;
}
body.body-index #body {
  padding: 0 !important;
}
.masthead {
  flex: 1;
}

#footer {
  text-align: center;
  padding: 13px 0;
  background: #1B1C1D;
  border-top: 1px solid #333 !important;
}

#navbar {
  margin: 0;
  border-radius: 0;
  border-bottom: 1px solid #333;
}

/* Forms */

/* TODO: vertical align using flexbox */

.form-user {
   width: 33% !important;
   margin: 0 auto !important;
   //margin-top: 10% !important;
}

.form-error {
   color: #E50000 !important;
}

/* Flask flashes */

#flashes {
  margin: 0;
  padding: 20px;
}
#flashes.dark {
  background: #1B1C1D;
}
#flashes li {
  margin: 0;
  list-style: none;
  text-align: center;
}

/* Errors */

.error-box {
   margin-top: 8%;
}

</style>


<head>

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script
    async
    src="https://www.googletagmanager.com/gtag/js?id=UA-161947094-1">
  </script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-161947094-1');
  </script>

  {% block head %}
  <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
  <meta charset="UTF-8">
  <link rel="shortcut icon" href="{{ url_for('static', filename='img/favicon.ico') }}">
  <!-- jQuery -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <!-- Semantic Main CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css" />
  <!-- Semantic Reset CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.1.6/components/reset.min.css" />
  <!-- Semantic Menu CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.1.6/components/menu.min.css" />
  <!-- Main Semantic JS  -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.js"></script>
  <!-- Turbolinks JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/turbolinks/5.2.0/turbolinks.js"></script>
  <!-- Browser tab name -->
  <title>{{ title }}</title>
</head>

<body id="container" class="body-{{ request.endpoint }}">
  <div id="header-and-body">
  <div id="header">
    <!-- Navbar -->
    <div id="navbar" class="ui inverted menu">
      {{ m.nav_link('index', 'On-COVID19') }}
      {{ m.nav_link('projectbp.list', 'Projects') }}
      <div class="ui right inverted menu">
        {% if current_user.is_authenticated %}
          <div class="item">
            <a class="ui primary button" href="{{ url_for('userbp.account') }}">
              {{ current_user.full_name }}
            </a>
          </div>
          <div class="item">
            <a class="ui default button" href="{{
              url_for('userbp.signout', next=request.path)
            }}">
              Sign out
            </a>
          </div>
        {% else %}
          <div class="item">
            <a class="ui primary button" href="{{
              url_for('userbp.signin', next=request.path)
            }}">
              Sign in
            </a>
          </div>
          <div class="item">
            <a class="ui default button" href="{{
              url_for('userbp.signup', next=request.path)
            }}">
              Sign up
            </a>
          </div>
        {% endif %}
      </div>
    </div>
    {% endblock %}
  </div>
  <!-- Message flashing -->
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      <ul
        id="flashes"
        class="{{ 'dark' if request.endpoint == 'index' else '' }}"
      >
        {% for category, message in messages %}
          <li
            class="
                ui {{ category }} message flash
                {{ 'black' if request.endpoint == 'index' else '' }}
            "
          >
            {{ message }}
          </li>
        {% endfor %}
      </ul>
    {% endif %}
  {% endwith %}
  <div id="body" class="body">
    {% block content %}
    {% endblock %}
  </div>
  </div>
  <div id="footer">
    <div class="ui inverted divided horizontal footer link list">
      <div class="item">
        Made in Toronto
      </div>
      <div class="item">
        <a href="https://github.com/abrichr/oncovid19">
          <i class="github icon"></i>
        </a>
      </div>
    </div>
  </div>

  <script>
    if (
      window.location.href.includes('herokuapp') &&
      !window.location.href.includes('dev')
    ) {
      window.location.href = 'http://www.oncovid19.com/'
    }
  </script>

</body>

</html>
